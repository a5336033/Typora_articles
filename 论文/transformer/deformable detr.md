 **论文标题**  Title

 DEFORMABLE DETR: DEFORMABLE TRANSFORMERS
FOR END-TO-END OBJECT DETECTION

 

 **发表期刊**  Publication

 ICLR 2021 Oral

 

 **作者** Author

 [Xizhou Zhu](https://arxiv.org/search/cs?searchtype=author&query=Zhu%2C+X)

 

 **发表日期**  Published Date

 **[[v1\]](https://arxiv.org/abs/2010.04159v1)** Thu, 8 Oct 2020 17:59:21 UTC (762 KB)
**[[v2\]](https://arxiv.org/abs/2010.04159v2)** Mon, 30 Nov 2020 13:30:43 UTC (762 KB)
**[[v3\]](https://arxiv.org/abs/2010.04159v3)** Wed, 17 Mar 2021 08:22:51 UTC (4,116 KB)
**[v4]** Thu, 18 Mar 2021 03:14:26 UTC (4,116 KB)

 

 **阅读日期**  Read Date

 2022.11.7

 

 **评分**  Score

☐  优秀 

☐  一般

☐  较差

☐  很差

 

| **类型**             | **思路**                                                     | **批注** |
| -------------------- | :----------------------------------------------------------- | -------- |
| **研究背景**         | 本文的主要内容是什么？目前研究情况是什么？                   |          |
| **方法和性质**       | 研究对象是什么？作者如何采集数据？这项研究是在何时何地进行的? |          |
| **研究结果**         | 有哪些亮点？有哪些惊喜？                                     |          |
| **数据**             | 表格、图表和插图最引人注目的是？为什么作者要包含它们?        |          |
| **结论**             | 作者从中学到了什么?                                          |          |
| **研究展望**         | 对未来的研究有什么暗示或建议?                                |          |
| **重要性**           | 为什么这项研究很重要?                                        |          |
| **想法和问题**       | 你有什么想法和问题？                                         |          |
| **本文好的表达摘录** | 能复用的要点是什么？                                         |          |

 

### 研究背景

DETR的提出用以消除目标检测中很多手工设计的组件，同时展示良好的性能。但由于Transformer注意模块再处理图像特征映射时的局限性，其收敛速度缓慢，特征空间的分辨率有限。为了缓解这些问题，提出deformable detr，它的注意模块仅关注参考点周围的一小部分关键采样点。

比普通detr获得更好的性能，且训练时间少10倍。

现代检测器采用许多手工制作的组件，例如：锚点生成、基于规则的训练目标分配、非极大值抑制。

它们不是完全端到端的。Carion等人提出了DETR消除了对此类手工制作组件的需求。并构建第一个完全端到端的目标检测器，实现了非常有竞争力的性能。

结合cnn和transfomer，利用变形金刚的多功能和强大的关系建模能力，在适当设计的训练信号下，取代手工制作的规则。

detr的问题：

1. 与现有的目标检测器相比，它需要更长的训练时间才能收敛。例如，在COCO (Lin et al, 2014)基准上，DETR需要500个epoch才能收敛，这比Faster R-CNN (Ren et al, 2015)慢约10到20倍。
2. DETR在检测小物体时提供了相对较低的性能。现代物体探测器通常利用多尺度特征，从高分辨率特征图中检测小物体。同时，高分辨率的特征图给DETR带来了不可接受的复杂性。

上述问题主要是由于transformer组件在处理图像特征图时存在不足。初始化时，注意模块对特征图中的所有像素施加几乎一致的注意权重。长时间的训练是必要的。以学习注意力权重集中在稀疏的有意义的位置。另一方面，transformer编码器的注意权重计算是二次的。因此，处理高分辨率特征图具有很高的计算复杂度和存储复杂度。

图像领域，可变形卷积是处理稀疏空间位置的一种强大而有效的机制。但它没有元素关系建模机制，而元素关系建模是detr成功的关键。

### 方法和性质

提出Deformable DETR，缓解了detr收敛速度慢和复杂度高的问题。结合了可变形卷积的稀疏空间采样和transformer的关系建模能力。

为每个查询只分配少量固定数量的键，可以缓解收敛和特征空间分辨率的问题。

给定输入特征映射x∈RC×H×W，q索引一个具有内容特征zq和二维参考点pq的查询元素。

![image-20221108112937136](E:/OneDrive/Typora文章/assets/deformable detr/image-20221108112937136.png)

m表示多头注意力头，k是键的索引，K是所有键的数，∆pmqk and Amqk分别表示第m个注意头中第k个采样点的采样偏移量和注意权重。标量注意权重Amqk在[0,1]范围内，归一化为![image-20221108123625600](E:/OneDrive/Typora文章/assets/deformable detr/image-20221108123625600.png)

∆pmqk和Amqk都是通过查询特征zq上的线性投影得到的。实现中，查询特征zq被馈送给一个3mk通道。其中前2M K通道编码采样偏移量∆pmqk，其余M K通道被馈送给一个softmax算子获得注意权值Amqk。

设计了可变形注意模块，将卷积特征映射作为关键元素处理。设Nq为查询元素个数，当Mk较小时，变形注意模块的复杂度为O(2NqC2 + min(HW C2, NqKC2))。

Nq = N（N为对象查询次数），复杂度为O（N KC2），与空间大小HW无关。